#N canvas 805 131 923 778 10;
#X obj 100 120 cnv 15 210 190 empty empty empty 7 7 0 14 -262009 -262144
0;
#X obj 1200 100 inlet~ left;
#X obj 1300 100 inlet~ right;
#X obj 1420 70 inlet note;
#X obj 1680 100 inlet ctl;
#X obj 1200 300 outlet~ left;
#X obj 1300 300 outlet~ right;
#X obj 1400 450 outlet note;
#X obj 1680 420 outlet ctl;
#X obj 720 60 r save-state-\$0;
#X obj 786 408 s save-state-\$0;
#X obj 100 320 tgl 15 1 from-loop-\$0 to-loop-\$0 loop 20 5 0 10 -262144
-1 -1 1 1;
#X obj 110 130 tgl 15 1 from-play-\$0 to-play-\$0 play 20 5 0 10 -262144
-1 -1 1 1;
#X obj 1400 410 r to-note-out-\$0;
#X obj 720 380 savestate, f 11;
#X text 810 380 üëà bangs when parent is saved;
#X obj 720 300 f;
#X obj 720 410 t b l;
#X obj 720 660 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 720 680 s to-units-\$0;
#X obj 100 100 cnv 15 210 20 empty empty bop.euclidean 7 7 0 14 -195264
-262144 0;
#X text 2980 1740 comment;
#X floatatom 400 1050 5 0 0 0 - - -;
#X floatatom 550 1050 5 0 0 0 - - -;
#X floatatom 710 1050 5 0 0 0 - - -;
#X floatatom 2402 982 5 0 0 0 - - -;
#X obj 710 1090 s bar-length-\$0;
#X obj 550 1090 s offset-\$0;
#X obj 400 1080 s num-hits-\$0;
#X obj 2272 652 r bar-length-\$0;
#X obj 2612 902 r offset-\$0;
#X obj 2512 992 r num-hits-\$0;
#X obj 2402 802 f, f 40;
#X obj 2402 862 until;
#X text 2762 1862 comment;
#X obj 2402 1192 pack 0 f f;
#X obj 2402 1092 t b f;
#X obj 2502 862 array size rhythm-\$0;
#X obj 2402 832 t f f, f 17;
#X obj 2402 1282 tabwrite rhythm-\$0;
#X obj 2402 1252 unpack;
#X obj 2402 1222 route 0;
#X obj 2512 1022 t b b f, f 24;
#X obj 2612 932 t b b f, f 27;
#X obj 2272 682 t b b f f, f 91;
#X obj 1840 750 *;
#X obj 1840 810 tabread rhythm-\$0;
#X obj 110 170 hsl 85 15 0 5.9 0 1 from-units-\$0 to-units-\$0 unit:bars(5)
6 6 0 10 -262144 -1 -1 8400 1;
#X obj 110 150 nbx 9 15 1 1e+037 0 1 from-duration-\$0 to-duration-\$0
duration 40 6 0 10 -262144 -1 -1 2 256;
#N canvas 536 233 450 305 tick-calculator 0;
#X obj 73 -159 i;
#X msg 73 -39 list ticks 16ths 12ths 8ths beats bars, f 18;
#X obj 73 17 cyclone/zl nth, f 21;
#X obj 73 -69 t b f, f 21;
#X obj 73 -99 + 1;
#X text 230 -35 todo: calculate bars according to time signature,
f 17;
#X obj 217 17 cyclone/zl nth, f 21;
#X obj 217 -99 t b f, f 21;
#X msg 217 -69 1 6 8 12 24 96, f 18;
#X obj 216 106 *;
#X obj 229 70 t b f;
#X obj 72 -193 inlet;
#X obj 238 38 inlet;
#X obj 70 160 outlet;
#X obj 214 160 outlet;
#X obj 71 109 symbol;
#X connect 0 0 4 0;
#X connect 1 0 2 0;
#X connect 2 0 15 0;
#X connect 3 0 1 0;
#X connect 3 1 2 1;
#X connect 4 0 3 0;
#X connect 4 0 7 0;
#X connect 6 0 9 0;
#X connect 7 0 8 0;
#X connect 7 1 6 1;
#X connect 8 0 6 0;
#X connect 9 0 14 0;
#X connect 10 0 9 0;
#X connect 10 1 9 1;
#X connect 11 0 0 0;
#X connect 12 0 10 0;
#X connect 15 0 13 0;
#X restore 110 960 pd tick-calculator;
#X obj 60 860 r from-units-\$0;
#X obj 170 930 r from-duration-\$0;
#X obj 170 990 s duration-ticks-\$0;
#X obj 60 1100 s to-units-\$0;
#X obj 60 900 t f f, f 8;
#X obj 1310 801 i;
#X obj 1310 830 %;
#X obj 1349 798 r duration-ticks-\$0;
#X obj 1310 770 route ticks;
#X obj 1310 680 r bop-time;
#X obj 1310 860 /, f 7;
#X obj 2622 962 s reset-counter-\$0;
#X obj 2422 922 r reset-counter-\$0;
#X obj 2512 1052 s reset-counter-\$0;
#X obj 2452 712 s reset-counter-\$0;
#X obj 2612 982 s trigger-euclid-\$0;
#X obj 2462 1082 s trigger-euclid-\$0;
#X obj 2402 762 r trigger-euclid-\$0;
#X obj 2272 712 s trigger-euclid-\$0;
#N canvas 536 235 450 301 looping 0;
#X obj 160 203 + 1;
#X obj 80 300 t b 0 b;
#X obj 390 218 i;
#X obj 390 189 spigot;
#X obj 390 276 change;
#X obj 390 305 sel 0;
#X obj 390 247 %;
#X text 350 80 ‚è∞ RETRIGGER OFF OF TICKS % DURATIONüëá;
#X text 168 133 Stop if not looping üëá;
#X obj 160 170 r from-loop-\$0;
#X obj 242 202 r endbang-\$0;
#X obj 80 402 s to-seq-\$0;
#X obj 458 159 r from-loop-\$0;
#X obj 429 215 r duration-ticks-\$0;
#X obj 390 334 s start-\$0;
#X obj 350 160 route ticks;
#X obj 350 130 r bop-time;
#X msg 242 355 start -1;
#X obj 242 389 s to-seq-\$0;
#X msg 80 368 goto 0;
#X obj 90 340 s to-play-\$0;
#X text 40 495 todo: fix looping behaviour;
#X text 40 520 if looping longer than duration of the clip \, playback
should pause until loop length comes around, f 33;
#X obj 160 240 cyclone/gate 2;
#X connect 0 0 23 0;
#X connect 1 0 19 0;
#X connect 1 1 20 0;
#X connect 2 0 6 0;
#X connect 3 0 2 0;
#X connect 4 0 5 0;
#X connect 5 0 14 0;
#X connect 6 0 4 0;
#X connect 9 0 0 0;
#X connect 10 0 23 1;
#X connect 12 0 3 1;
#X connect 13 0 6 1;
#X connect 15 0 3 0;
#X connect 16 0 15 0;
#X connect 17 0 18 0;
#X connect 19 0 11 0;
#X connect 23 0 1 0;
#X connect 23 1 17 0;
#X restore 1370 860 pd looping reference;
#X obj 1310 940 s to-position-\$0;
#X obj 110 210 hsl 185 15 0 24 0 1 from-hits-\$0 to-hits-\$0 hits:3
5 5 0 10 -262144 -1 -1 2500 1;
#X obj 400 1110 r from-hits-\$0;
#X obj 400 1190 s to-hits-\$0;
#X obj 400 980 r from-hits-\$0;
#X obj 110 230 hsl 185 15 0 24 0 1 from-offset-\$0 to-offset-\$0 offset:0
5 5 0 10 -262144 -1 -1 0 1;
#X obj 550 1110 r from-offset-\$0;
#X obj 550 1200 s to-offset-\$0;
#X obj 550 980 r from-offset-\$0;
#X obj 710 1110 r from-divisions-\$0;
#X obj 710 1200 s to-divisions-\$0;
#X obj 110 190 hsl 185 15 0 24 0 1 from-divisions-\$0 to-divisions-\$0
divisions:6 5 5 0 10 -262144 -1 -1 4633 1;
#X obj 710 980 r from-divisions-\$0;
#X obj 400 1020 i;
#X obj 550 1020 i;
#X obj 710 1020 i;
#X obj 210 130 hsl 85 15 0 11 0 1 from-note-\$0 to-note-\$0 note:a(0)
5 5 0 10 -262144 -1 -1 0 1;
#X obj 560 860 r from-note-\$0;
#X obj 560 920 s to-note-\$0;
#N canvas 536 234 450 303 make-note-label 0;
#X obj 80 270 list split;
#X msg 110 300 \$1;
#X obj 40 130 clip 0 11;
#X obj 40 80 i;
#X obj 110 330 pack s f;
#X obj 40 100 change;
#X msg 110 360 label note:\$1(\$2);
#X obj 40 160 t f b f f, f 20;
#X obj 13 26 inlet;
#X obj 110 410 outlet;
#X msg 80 200 a a# b c c# d d# e f f# g g#, f 8;
#X connect 0 1 1 0;
#X connect 1 0 4 0;
#X connect 2 0 7 0;
#X connect 3 0 5 0;
#X connect 4 0 6 0;
#X connect 5 0 2 0;
#X connect 6 0 9 0;
#X connect 7 1 10 0;
#X connect 7 2 0 1;
#X connect 7 3 4 1;
#X connect 8 0 3 0;
#X connect 10 0 0 0;
#X restore 560 890 pd make-note-label;
#X obj 210 150 hsl 85 15 0 8.9 0 1 from-octave-\$0 to-octave-\$0 octave:4
5 5 0 10 -262144 -1 -1 4119 1;
#X obj 680 830 r from-octave-\$0;
#X obj 680 920 s to-octave-\$0;
#X obj 110 280 hsl 185 20 0 1 0 0 from-position-\$0 to-position-\$0
position:0 5 5 0 10 -262144 -1 -1 0 1;
#X obj 810 160 r from-units-\$0;
#X obj 790 140 r from-duration-\$0;
#X obj 750 100 r from-hits-\$0;
#X obj 770 120 r from-offset-\$0;
#X obj 730 80 r from-divisions-\$0;
#X obj 830 180 r from-note-\$0;
#X obj 840 200 r from-octave-\$0;
#X obj 880 240 r from-play-\$0;
#X obj 860 220 r from-loop-\$0;
#X obj 840 860 r from-position-\$0;
#X obj 840 920 s to-position-\$0;
#X obj 800 650 s to-divisions-\$0;
#X obj 810 630 s to-hits-\$0;
#X obj 820 610 s to-offset-\$0;
#X obj 830 590 s to-duration-\$0;
#X obj 840 570 s to-units-\$0;
#X obj 850 550 s to-note-\$0;
#X obj 860 530 s to-octave-\$0;
#X obj 870 510 s to-loop-\$0;
#X obj 880 490 s to-play-\$0;
#X obj 1330 700 r from-play-\$0;
#X obj 1310 740 spigot;
#X obj 1700 380 s to-divisions-\$0;
#X obj 1750 360 s to-hits-\$0;
#X obj 1790 340 s to-offset-\$0;
#X obj 1830 320 s to-duration-\$0;
#X obj 1870 300 s to-units-\$0;
#X obj 1910 280 s to-note-\$0;
#X obj 1960 260 s to-octave-\$0;
#X obj 2000 240 s to-loop-\$0;
#X obj 2040 220 s to-play-\$0;
#X obj 1760 1170 r from-note-\$0;
#X obj 1770 1190 r from-octave-\$0;
#X obj 1740 1480 s to-note-out-\$0;
#X obj 1770 1220 t b f, f 19;
#X obj 1740 1330 f;
#X obj 1670 640 r from-position-\$0;
#X obj 60 1030 pack f s;
#X obj 1670 930 f;
#X obj 1670 750 *;
#X obj 1710 710 r from-divisions-\$0;
#X obj 1670 780 int;
#X obj 1670 890 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 1670 670 t f f, f 29;
#X obj 1890 690 r from-divisions-\$0;
#X obj 1670 830 clip 0;
#X obj 1840 780 clip 0, f 7;
#X obj 1670 860 change -1;
#X text 1700 920 1 for note one;
#X text 1700 945 0 for note off;
#X obj 1740 1100 * 127;
#X obj 1740 1360 pack f f, f 34;
#X obj 1760 1260 expr $i1 + 1 + (12 * ($i2+1));
#X obj 1760 1390 r flush-\$0;
#X obj 1740 1140 t b f, f 34;
#X obj 2050 200 s to-position-\$0;
#X obj 1740 1000 t f b;
#X obj 1850 1030 s flush-\$0;
#X obj 1850 1000 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 1710 740 int;
#X obj 1890 720 int;
#X obj 1910 970 r from-note-\$0;
#X obj 1890 950 r from-octave-\$0;
#X obj 210 170 hsl 85 15 0 127 0 1 from-velocity-\$0 to-velocity-\$0
velocity:127 5 5 0 10 -262144 -1 -1 8400 1;
#X obj 400 830 r from-velocity-\$0;
#X obj 400 920 s to-velocity-\$0;
#X obj 1760 1060 r from-velocity-\$0;
#X obj 890 260 r from-velocity-\$0;
#X obj 890 470 s to-velocity-\$0;
#X obj 720 340 pack f f f f f f f f f f;
#X obj 740 440 unpack f f f f f f f f f f;
#X obj 2060 180 s to-velocity-\$0;
#X obj 1700 140 route divisions hits offset duration units note octave
loop play position velocity, f 64;
#X obj 1420 130 poly 1 1;
#X obj 1440 180 stripnote;
#X obj 1490 210 s to-velocity-\$0;
#X obj 1440 310 s to-note-\$0;
#X obj 1500 290 s to-octave-\$0;
#X obj 1740 1420 cyclone/flush;
#X obj 1740 1450 pack f f;
#N canvas 700 226 451 326 midi2no 0;
#X obj 140 80 / 12;
#X obj 40 80 % 12;
#X obj 40 100 - 1;
#X obj 140 100 - 1;
#X obj 13 26 inlet;
#X obj 13 170 outlet;
#X obj 69 170 outlet;
#X connect 0 0 3 0;
#X connect 1 0 2 0;
#X connect 2 0 5 0;
#X connect 3 0 6 0;
#X connect 4 0 1 0;
#X connect 4 0 0 0;
#X restore 1440 260 pd midi2no;
#X obj 2432 1142 sub.bop.euclidean ukulele, f 60;
#N canvas 0 0 450 300 (subpatch) 0;
#X array rhythm-\$0 6 float 3;
#A 0 1 0 1 0 1 0;
#X coords 0 1 6 0 190 25 1;
#X restore 110 250 graph;
#X obj 60 990 int;
#X msg 60 1070 label unit:\$2(\$1);
#X msg 400 890 label velocity:\$1;
#X obj 400 860 int;
#X msg 680 890 label octave:\$1;
#X obj 680 860 int;
#X msg 840 890 label position:\$1;
#X obj 400 1135 int;
#X msg 400 1160 label hits:\$1;
#X msg 550 1170 label offset:\$1;
#X obj 550 1140 int;
#X obj 710 1135 int;
#X msg 710 1160 label divisions:\$1;
#X obj 2402 952 cyclone/counter, f 18;
#X connect 1 0 5 0;
#X connect 2 0 6 0;
#X connect 3 0 167 0;
#X connect 4 0 8 0;
#X connect 4 0 166 0;
#X connect 9 0 16 0;
#X connect 13 0 7 0;
#X connect 14 0 17 0;
#X connect 14 1 10 0;
#X connect 16 0 163 0;
#X connect 17 0 18 0;
#X connect 17 1 164 0;
#X connect 18 0 19 0;
#X connect 22 0 28 0;
#X connect 23 0 27 0;
#X connect 24 0 26 0;
#X connect 25 0 36 0;
#X connect 29 0 44 0;
#X connect 30 0 43 0;
#X connect 31 0 42 0;
#X connect 32 0 38 0;
#X connect 33 0 190 0;
#X connect 35 0 41 0;
#X connect 36 0 35 0;
#X connect 36 1 175 0;
#X connect 38 0 33 0;
#X connect 38 1 37 0;
#X connect 40 0 39 0;
#X connect 40 1 39 1;
#X connect 41 0 40 0;
#X connect 42 0 66 0;
#X connect 42 1 63 0;
#X connect 42 2 175 1;
#X connect 43 0 65 0;
#X connect 43 1 61 0;
#X connect 43 2 175 2;
#X connect 44 0 68 0;
#X connect 44 1 64 0;
#X connect 44 2 32 1;
#X connect 44 3 175 3;
#X connect 45 0 140 0;
#X connect 46 0 132 1;
#X connect 49 0 131 1;
#X connect 49 1 52 0;
#X connect 50 0 54 0;
#X connect 51 0 49 1;
#X connect 54 0 177 0;
#X connect 54 1 49 0;
#X connect 55 0 56 0;
#X connect 56 0 60 0;
#X connect 57 0 56 1;
#X connect 57 0 60 1;
#X connect 58 0 55 0;
#X connect 59 0 115 0;
#X connect 60 0 70 0;
#X connect 62 0 190 2;
#X connect 67 0 32 0;
#X connect 72 0 184 0;
#X connect 74 0 83 0;
#X connect 76 0 187 0;
#X connect 78 0 84 0;
#X connect 79 0 188 0;
#X connect 82 0 85 0;
#X connect 83 0 22 0;
#X connect 84 0 23 0;
#X connect 85 0 24 0;
#X connect 87 0 89 0;
#X connect 89 0 88 0;
#X connect 91 0 182 0;
#X connect 94 0 163 4;
#X connect 95 0 163 3;
#X connect 96 0 163 1;
#X connect 97 0 163 2;
#X connect 98 0 16 1;
#X connect 99 0 163 5;
#X connect 100 0 163 6;
#X connect 101 0 163 8;
#X connect 102 0 163 7;
#X connect 103 0 183 0;
#X connect 114 0 115 1;
#X connect 115 0 58 0;
#X connect 125 0 146 0;
#X connect 126 0 128 0;
#X connect 128 0 146 0;
#X connect 128 1 146 1;
#X connect 129 0 145 0;
#X connect 130 0 137 0;
#X connect 131 0 178 0;
#X connect 132 0 150 0;
#X connect 133 0 135 0;
#X connect 134 0 153 0;
#X connect 135 0 139 0;
#X connect 136 0 132 0;
#X connect 137 0 133 0;
#X connect 137 1 45 0;
#X connect 138 0 154 0;
#X connect 139 0 141 0;
#X connect 140 0 46 0;
#X connect 141 0 136 0;
#X connect 144 0 148 0;
#X connect 145 0 172 0;
#X connect 146 0 129 1;
#X connect 147 0 172 0;
#X connect 148 0 129 0;
#X connect 148 1 145 1;
#X connect 150 0 144 0;
#X connect 150 1 152 0;
#X connect 152 0 151 0;
#X connect 153 0 133 1;
#X connect 153 0 139 2;
#X connect 154 0 45 1;
#X connect 154 0 140 2;
#X connect 158 0 180 0;
#X connect 160 0 144 1;
#X connect 161 0 163 9;
#X connect 163 0 14 0;
#X connect 164 0 105 0;
#X connect 164 1 106 0;
#X connect 164 2 107 0;
#X connect 164 3 108 0;
#X connect 164 4 109 0;
#X connect 164 5 110 0;
#X connect 164 6 111 0;
#X connect 164 7 112 0;
#X connect 164 8 113 0;
#X connect 164 9 162 0;
#X connect 166 0 116 0;
#X connect 166 1 117 0;
#X connect 166 2 118 0;
#X connect 166 3 119 0;
#X connect 166 4 120 0;
#X connect 166 5 121 0;
#X connect 166 6 122 0;
#X connect 166 7 123 0;
#X connect 166 8 124 0;
#X connect 166 9 149 0;
#X connect 166 10 165 0;
#X connect 167 1 168 0;
#X connect 167 2 168 1;
#X connect 168 0 174 0;
#X connect 168 1 169 0;
#X connect 172 0 173 0;
#X connect 172 1 173 1;
#X connect 173 0 127 0;
#X connect 174 0 170 0;
#X connect 174 1 171 0;
#X connect 175 0 35 1;
#X connect 175 1 35 2;
#X connect 177 0 131 0;
#X connect 178 0 53 0;
#X connect 179 0 159 0;
#X connect 180 0 179 0;
#X connect 181 0 92 0;
#X connect 182 0 181 0;
#X connect 183 0 104 0;
#X connect 184 0 185 0;
#X connect 185 0 73 0;
#X connect 186 0 77 0;
#X connect 187 0 186 0;
#X connect 188 0 189 0;
#X connect 189 0 80 0;
#X connect 190 0 25 0;
#X coords 0 -1 1 1 210 210 2 100 100;
