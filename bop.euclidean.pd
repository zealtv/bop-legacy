#N canvas 0 0 1522 772 10;
#X declare -path ./subpatches/euclidean;
#X obj 100 120 cnv 15 210 190 empty empty empty 7 7 0 14 #fdf6e3 #ffffff
0;
#X obj 1200 100 inlet~ left;
#X obj 1300 100 inlet~ right;
#X obj 1530 100 inlet note;
#X obj 1680 100 inlet ctl;
#X obj 1200 300 outlet~ left;
#X obj 1300 300 outlet~ right;
#X obj 1530 440 outlet note;
#X obj 1680 420 outlet ctl;
#X obj 720 60 r save-state-\$0;
#X obj 786 408 s save-state-\$0;
#X obj 100 320 tgl 15 1 from-loop-\$0 to-loop-\$0 loop 20 5 0 10 #ffffff
#000000 #000000 1 1;
#X obj 110 130 tgl 15 1 from-play-\$0 to-play-\$0 play 20 5 0 10 #ffffff
#000000 #000000 1 1;
#X obj 1530 400 r to-note-out-\$0;
#X obj 720 380 savestate, f 11;
#X text 810 380 üëà bangs when parent is saved;
#X obj 720 300 f;
#X obj 720 410 t b l;
#X obj 720 660 bng 15 250 50 0 empty empty empty 17 7 0 10 #fcfcfc
#000000 #000000;
#X obj 720 680 s to-units-\$0;
#X obj 100 100 cnv 15 210 20 empty empty bop.euclidean 7 7 0 14 #bca9fc
#ffffff 0;
#X text 2980 1740 comment;
#X floatatom 400 1050 5 0 0 0 - - -, f 5;
#X floatatom 550 1050 5 0 0 0 - - -, f 5;
#X floatatom 710 1050 5 0 0 0 - - -, f 5;
#X floatatom 2402 982 5 0 0 0 - - -, f 5;
#X obj 710 1090 s bar-length-\$0;
#X obj 550 1090 s offset-\$0;
#X obj 400 1080 s num-hits-\$0;
#X obj 2272 652 r bar-length-\$0;
#X obj 2612 902 r offset-\$0;
#X obj 2512 992 r num-hits-\$0;
#X obj 2402 802 f, f 40;
#X obj 2402 862 until;
#X text 2762 1862 comment;
#X obj 2402 952 counter, f 11;
#X obj 2402 1192 pack 0 f f;
#X obj 2402 1092 t b f;
#X obj 2502 862 array size rhythm-\$0;
#X obj 2402 832 t f f, f 17;
#X obj 2402 1282 tabwrite rhythm-\$0;
#X obj 2402 1252 unpack;
#X obj 2402 1222 route 0;
#X obj 2512 1022 t b b f, f 24;
#X obj 2612 932 t b b f, f 27;
#X obj 2272 682 t b b f f, f 91;
#X obj 1840 750 *;
#X obj 1840 810 tabread rhythm-\$0;
#X obj 110 170 hsl 85 15 0 5.9 0 1 from-units-\$0 to-units-\$0 units:bars(5)
6 6 0 10 #ffffff #000000 #000000 8400 1;
#X obj 110 150 nbx 9 15 1 1e+37 0 1 from-duration-\$0 to-duration-\$0
duration 40 6 0 10 #fcfcfc #000000 #000000 2 256 0;
#N canvas 536 233 450 305 tick-calculator 0;
#X obj 73 -159 i;
#X msg 73 -39 list ticks 16ths 12ths 8ths beats bars, f 18;
#X obj 73 17 cyclone/zl nth, f 21;
#X obj 73 -69 t b f, f 21;
#X obj 73 -99 + 1;
#X text 230 -35 todo: calculate bars according to time signature,
f 17;
#X obj 217 17 cyclone/zl nth, f 21;
#X obj 217 -99 t b f, f 21;
#X msg 217 -69 1 6 8 12 24 96, f 18;
#X obj 216 106 *;
#X obj 229 70 t b f;
#X obj 72 -193 inlet;
#X obj 238 38 inlet;
#X obj 70 160 outlet;
#X obj 214 160 outlet;
#X connect 0 0 4 0;
#X connect 1 0 2 0;
#X connect 2 0 13 0;
#X connect 3 0 1 0;
#X connect 3 1 2 1;
#X connect 4 0 3 0;
#X connect 4 0 7 0;
#X connect 6 0 9 0;
#X connect 7 0 8 0;
#X connect 7 1 6 1;
#X connect 8 0 6 0;
#X connect 9 0 14 0;
#X connect 10 0 9 0;
#X connect 10 1 9 1;
#X connect 11 0 0 0;
#X connect 12 0 10 0;
#X restore 110 960 pd tick-calculator;
#X obj 60 860 r from-units-\$0;
#X obj 170 930 r from-duration-\$0;
#X obj 170 990 s duration-ticks-\$0;
#X obj 60 1150 s to-units-\$0;
#X obj 60 900 t f f, f 8;
#X obj 1310 801 i;
#X obj 1310 830 %;
#X obj 1349 798 r duration-ticks-\$0;
#X obj 1310 770 route ticks;
#X obj 1310 680 r bop-time;
#X obj 1310 860 /, f 7;
#X obj 2432 1142 euclid ukulele, f 60;
#X obj 2622 962 s reset-counter-\$0;
#X obj 2422 922 r reset-counter-\$0;
#X obj 2512 1052 s reset-counter-\$0;
#X obj 2452 712 s reset-counter-\$0;
#X obj 2612 982 s trigger-euclid-\$0;
#X obj 2462 1082 s trigger-euclid-\$0;
#X obj 2402 762 r trigger-euclid-\$0;
#X obj 2272 712 s trigger-euclid-\$0;
#X obj 220 50 declare -path ./subpatches/euclidean;
#N canvas 0 0 450 300 looping 0;
#X obj 160 240 gate 2, f 14;
#X obj 160 203 + 1;
#X obj 80 300 t b 0 b;
#X obj 390 218 i;
#X obj 390 189 spigot;
#X obj 390 276 change;
#X obj 390 305 sel 0;
#X obj 390 247 %;
#X text 350 80 ‚è∞ RETRIGGER OFF OF TICKS % DURATIONüëá;
#X text 168 133 Stop if not looping üëá;
#X obj 160 170 r from-loop-\$0;
#X obj 242 202 r endbang-\$0;
#X obj 80 402 s to-seq-\$0;
#X obj 458 159 r from-loop-\$0;
#X obj 429 215 r duration-ticks-\$0;
#X obj 390 334 s start-\$0;
#X obj 350 160 route ticks;
#X obj 350 130 r bop-time;
#X msg 242 355 start -1;
#X obj 242 389 s to-seq-\$0;
#X msg 80 368 goto 0;
#X obj 90 340 s to-play-\$0;
#X text 40 495 todo: fix looping behaviour;
#X text 40 520 if looping longer than duration of the clip \, playback
should pause until loop length comes around, f 33;
#X connect 0 0 2 0;
#X connect 0 1 18 0;
#X connect 1 0 0 0;
#X connect 2 0 20 0;
#X connect 2 1 21 0;
#X connect 3 0 7 0;
#X connect 4 0 3 0;
#X connect 5 0 6 0;
#X connect 6 0 15 0;
#X connect 7 0 5 0;
#X connect 10 0 1 0;
#X connect 11 0 0 1;
#X connect 13 0 4 1;
#X connect 14 0 7 1;
#X connect 16 0 4 0;
#X connect 17 0 16 0;
#X connect 18 0 19 0;
#X connect 20 0 12 0;
#X restore 1370 860 pd looping reference;
#X obj 1310 940 s to-position-\$0;
#X obj 110 210 hsl 185 15 0 24 0 1 from-hits-\$0 to-hits-\$0 hits:7
5 5 0 10 #fcfcfc #000000 #000000 5500 1;
#X obj 400 1110 r from-hits-\$0;
#X obj 400 1170 s to-hits-\$0;
#X obj 400 1140 sprintf label hits:%i;
#X obj 400 980 r from-hits-\$0;
#X obj 110 230 hsl 185 15 0 24 0 1 from-offset-\$0 to-offset-\$0 offset:1
5 5 0 10 #fcfcfc #000000 #000000 1400 1;
#X obj 550 1110 r from-offset-\$0;
#X obj 550 1170 s to-offset-\$0;
#X obj 550 1140 sprintf label offset:%i;
#X obj 550 980 r from-offset-\$0;
#X obj 710 1110 r from-divisions-\$0;
#X obj 710 1170 s to-divisions-\$0;
#X obj 710 1140 sprintf label divisions:%i;
#X obj 110 190 hsl 185 15 0 24 0 1 from-divisions-\$0 to-divisions-\$0
divisions:12 5 5 0 10 #fcfcfc #000000 #000000 9733 1;
#X obj 710 980 r from-divisions-\$0;
#X obj 400 1020 i;
#X obj 550 1020 i;
#X obj 710 1020 i;
#X obj 210 130 hsl 85 15 0 11 0 1 from-note-\$0 to-note-\$0 note:d(5)
5 5 0 10 #fcfcfc #000000 #000000 4182 1;
#X obj 560 860 r from-note-\$0;
#X obj 560 920 s to-note-\$0;
#N canvas 536 234 450 303 make-note-label 0;
#X obj 80 270 list split;
#X msg 110 300 \$1;
#X obj 40 130 clip 0 11;
#X obj 40 80 i;
#X obj 110 330 pack s f;
#X obj 40 100 change;
#X msg 110 360 label note:\$1(\$2);
#X obj 40 160 t f b f f, f 20;
#X obj 13 26 inlet;
#X obj 110 410 outlet;
#X msg 80 200 a a# b c c# d d# e f f# g g#, f 8;
#X connect 0 1 1 0;
#X connect 1 0 4 0;
#X connect 2 0 7 0;
#X connect 3 0 5 0;
#X connect 4 0 6 0;
#X connect 5 0 2 0;
#X connect 6 0 9 0;
#X connect 7 1 10 0;
#X connect 7 2 0 1;
#X connect 7 3 4 1;
#X connect 8 0 3 0;
#X connect 10 0 0 0;
#X restore 560 890 pd make-note-label;
#X obj 210 150 hsl 85 15 0 8.9 0 1 from-octave-\$0 to-octave-\$0 octave:5
5 5 0 10 #fcfcfc #000000 #000000 5191 1;
#X obj 680 890 sprintf label octave:%i;
#X obj 680 860 r from-octave-\$0;
#X obj 680 920 s to-octave-\$0;
#N canvas 0 0 450 300 (subpatch) 0;
#X array rhythm-\$0 12 float 23 #bca9fc black;
#A 0 1 0 1 0 1 0 1 1 0 1 0 1;
#X coords 0 1 12 0 190 25 1;
#X restore 110 250 graph;
#X obj 110 280 hsl 185 15 0 1 0 0 from-position-\$0 to-position-\$0
position:0.552083 5 5 0 10 #fcfcfc #000000 #000000 10158 1;
#X obj 810 160 r from-units-\$0;
#X obj 790 140 r from-duration-\$0;
#X obj 750 100 r from-hits-\$0;
#X obj 770 120 r from-offset-\$0;
#X obj 730 80 r from-divisions-\$0;
#X obj 830 180 r from-note-\$0;
#X obj 840 200 r from-octave-\$0;
#X obj 880 240 r from-play-\$0;
#X obj 860 220 r from-loop-\$0;
#X obj 840 860 r from-position-\$0;
#X obj 840 920 s to-position-\$0;
#X obj 800 650 s to-divisions-\$0;
#X obj 810 630 s to-hits-\$0;
#X obj 820 610 s to-offset-\$0;
#X obj 830 590 s to-duration-\$0;
#X obj 840 570 s to-units-\$0;
#X obj 850 550 s to-note-\$0;
#X obj 860 530 s to-octave-\$0;
#X obj 870 510 s to-loop-\$0;
#X obj 880 490 s to-play-\$0;
#X obj 1330 700 r from-play-\$0;
#X obj 1310 740 spigot;
#X obj 1700 380 s to-divisions-\$0;
#X obj 1750 360 s to-hits-\$0;
#X obj 1790 340 s to-offset-\$0;
#X obj 1830 320 s to-duration-\$0;
#X obj 1870 300 s to-units-\$0;
#X obj 1910 280 s to-note-\$0;
#X obj 1960 260 s to-octave-\$0;
#X obj 2000 240 s to-loop-\$0;
#X obj 2040 220 s to-play-\$0;
#X obj 1760 1170 r from-note-\$0;
#X obj 1770 1190 r from-octave-\$0;
#X obj 1740 1540 s to-note-out-\$0;
#X obj 1770 1220 t b f, f 19;
#X obj 1740 1330 f;
#X obj 1670 640 r from-position-\$0;
#X obj 60 1110 sprintf label units:%s(%i), f 14;
#X obj 60 1030 pack f s;
#X msg 60 1070 \$2 \$1;
#X obj 110 990 tosymbol;
#X obj 1670 930 f;
#X obj 1670 750 *;
#X obj 1710 710 r from-divisions-\$0;
#X obj 1670 780 int;
#X obj 1670 890 bng 15 250 50 0 empty empty empty 17 7 0 10 #fcfcfc
#000000 #000000;
#X obj 1670 670 t f f, f 29;
#X obj 1890 690 r from-divisions-\$0;
#X obj 1670 830 clip 0;
#X obj 1840 780 clip 0, f 7;
#X obj 1670 860 change -1;
#X text 1700 920 1 for note one;
#X text 1700 945 0 for note off;
#X obj 1740 1100 * 127;
#X obj 1740 1360 pack f f, f 34;
#X obj 1760 1260 expr $i1 + 1 + (12 * ($i2+1));
#X obj 839 890 sprintf label position:%f;
#X obj 1740 1460 cyclone/midiflush;
#X obj 1760 1430 r flush-\$0;
#X obj 1740 1140 t b f, f 34;
#X obj 1740 1400 cyclone/midiformat;
#X obj 1740 1500 cyclone/midiparse;
#X obj 2050 200 s to-position-\$0;
#X obj 1740 1000 t f b;
#X obj 1850 1030 s flush-\$0;
#X obj 1850 1000 bng 15 250 50 0 empty empty empty 17 7 0 10 #fcfcfc
#000000 #000000;
#X obj 1710 740 int;
#X obj 1890 720 int;
#X obj 1910 970 r from-note-\$0;
#X obj 1890 950 r from-octave-\$0;
#X obj 210 170 hsl 85 15 0 127 0 1 from-velocity-\$0 to-velocity-\$0
velocity:81 5 5 0 10 #fcfcfc #000000 #000000 5400 1;
#X obj 400 890 sprintf label velocity:%i;
#X obj 400 860 r from-velocity-\$0;
#X obj 400 920 s to-velocity-\$0;
#X obj 1760 1060 r from-velocity-\$0;
#X obj 890 260 r from-velocity-\$0;
#X obj 890 470 s to-velocity-\$0;
#X obj 720 340 pack f f f f f f f f f f;
#X obj 740 440 unpack f f f f f f f f f f;
#X obj 2060 180 s to-velocity-\$0;
#X obj 1700 140 route divisions hits offset duration units note octave
loop play position velocity, f 64;
#X obj 1530 214 unpack;
#X obj 1530 140 poly 1 1;
#X obj 1550 170 stripnote;
#X obj 1560 240 s to-velocity-\$0;
#X obj 1470 310 s to-note-\$0;
#X obj 1550 330 s to-octave-\$0;
#X obj 1550 280 / 12;
#X obj 1470 260 % 12;
#X obj 1430 300 - 1;
#X obj 1580 290 - 1;
#X connect 1 0 5 0;
#X connect 2 0 6 0;
#X connect 3 0 184 0;
#X connect 4 0 8 0;
#X connect 4 0 182 0;
#X connect 9 0 16 0;
#X connect 13 0 7 0;
#X connect 14 0 17 0;
#X connect 14 1 10 0;
#X connect 16 0 179 0;
#X connect 17 0 18 0;
#X connect 17 1 180 0;
#X connect 18 0 19 0;
#X connect 22 0 28 0;
#X connect 23 0 27 0;
#X connect 24 0 26 0;
#X connect 25 0 37 0;
#X connect 29 0 45 0;
#X connect 30 0 44 0;
#X connect 31 0 43 0;
#X connect 32 0 39 0;
#X connect 33 0 35 0;
#X connect 35 0 25 0;
#X connect 36 0 42 0;
#X connect 37 0 36 0;
#X connect 37 1 62 0;
#X connect 39 0 33 0;
#X connect 39 1 38 0;
#X connect 41 0 40 0;
#X connect 41 1 40 1;
#X connect 42 0 41 0;
#X connect 43 0 68 0;
#X connect 43 1 65 0;
#X connect 43 2 62 1;
#X connect 44 0 67 0;
#X connect 44 1 63 0;
#X connect 44 2 62 2;
#X connect 45 0 70 0;
#X connect 45 1 66 0;
#X connect 45 2 32 1;
#X connect 45 3 62 3;
#X connect 46 0 151 0;
#X connect 47 0 143 1;
#X connect 50 0 142 0;
#X connect 50 1 53 0;
#X connect 51 0 55 0;
#X connect 52 0 50 1;
#X connect 55 0 140 0;
#X connect 55 1 50 0;
#X connect 56 0 57 0;
#X connect 57 0 61 0;
#X connect 58 0 57 1;
#X connect 58 0 61 1;
#X connect 59 0 56 0;
#X connect 60 0 123 0;
#X connect 61 0 73 0;
#X connect 62 0 36 1;
#X connect 62 1 36 2;
#X connect 64 0 35 2;
#X connect 69 0 32 0;
#X connect 75 0 77 0;
#X connect 77 0 76 0;
#X connect 78 0 89 0;
#X connect 80 0 82 0;
#X connect 82 0 81 0;
#X connect 83 0 90 0;
#X connect 84 0 86 0;
#X connect 86 0 85 0;
#X connect 88 0 91 0;
#X connect 89 0 22 0;
#X connect 90 0 23 0;
#X connect 91 0 24 0;
#X connect 93 0 95 0;
#X connect 95 0 94 0;
#X connect 97 0 99 0;
#X connect 98 0 97 0;
#X connect 102 0 179 4;
#X connect 103 0 179 3;
#X connect 104 0 179 1;
#X connect 105 0 179 2;
#X connect 106 0 16 1;
#X connect 107 0 179 5;
#X connect 108 0 179 6;
#X connect 109 0 179 8;
#X connect 110 0 179 7;
#X connect 111 0 158 0;
#X connect 122 0 123 1;
#X connect 123 0 59 0;
#X connect 133 0 157 0;
#X connect 134 0 136 0;
#X connect 136 0 157 0;
#X connect 136 1 157 1;
#X connect 137 0 156 0;
#X connect 138 0 148 0;
#X connect 139 0 54 0;
#X connect 140 0 141 0;
#X connect 141 0 139 0;
#X connect 142 0 140 1;
#X connect 143 0 165 0;
#X connect 144 0 146 0;
#X connect 145 0 168 0;
#X connect 146 0 150 0;
#X connect 147 0 143 0;
#X connect 148 0 144 0;
#X connect 148 1 46 0;
#X connect 149 0 169 0;
#X connect 150 0 152 0;
#X connect 151 0 47 0;
#X connect 152 0 147 0;
#X connect 155 0 161 0;
#X connect 156 0 162 0;
#X connect 157 0 137 1;
#X connect 158 0 112 0;
#X connect 159 0 163 0;
#X connect 160 0 159 0;
#X connect 161 0 137 0;
#X connect 161 1 156 1;
#X connect 162 0 159 0;
#X connect 163 0 135 0;
#X connect 165 0 155 0;
#X connect 165 1 167 0;
#X connect 167 0 166 0;
#X connect 168 0 144 1;
#X connect 168 0 150 2;
#X connect 169 0 46 1;
#X connect 169 0 151 2;
#X connect 173 0 175 0;
#X connect 174 0 173 0;
#X connect 176 0 155 1;
#X connect 177 0 179 9;
#X connect 179 0 14 0;
#X connect 180 0 113 0;
#X connect 180 1 114 0;
#X connect 180 2 115 0;
#X connect 180 3 116 0;
#X connect 180 4 117 0;
#X connect 180 5 118 0;
#X connect 180 6 119 0;
#X connect 180 7 120 0;
#X connect 180 8 121 0;
#X connect 180 9 178 0;
#X connect 182 0 124 0;
#X connect 182 1 125 0;
#X connect 182 2 126 0;
#X connect 182 3 127 0;
#X connect 182 4 128 0;
#X connect 182 5 129 0;
#X connect 182 6 130 0;
#X connect 182 7 131 0;
#X connect 182 8 132 0;
#X connect 182 9 164 0;
#X connect 182 10 181 0;
#X connect 183 0 189 0;
#X connect 183 0 190 0;
#X connect 183 1 186 0;
#X connect 184 1 185 0;
#X connect 184 2 185 1;
#X connect 185 0 183 0;
#X connect 189 0 192 0;
#X connect 190 0 191 0;
#X connect 191 0 187 0;
#X connect 192 0 188 0;
#X coords 0 -1 1 1 210 210 2 100 100;
